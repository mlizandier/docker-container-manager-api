services:
  app:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: hytale-server-interface
    ports:
      - "3000:3000"
    volumes:
      # Mount source code for hot reloading
      - ./src:/app/src
      - ./package.json:/app/package.json
      - ./tsconfig.json:/app/tsconfig.json
      # Mount node_modules so locally installed packages are available
      - ./node_modules:/app/node_modules
      # Mount docker socket to allow container management
      - /var/run/docker.sock:/var/run/docker.sock
    env_file:
      - path: ./.env
        required: true
    restart: unless-stopped

  dummy:
    image: alpine:latest
    container_name: dummy-container
    command: tail -f /dev/null
    volumes:
      # Mount downloads folder for file persistence
      - ./downloads:/downloads
    restart: unless-stopped
